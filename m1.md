# JAR (Java ARchive)
- 항아리, 병, 보관함
- 컴파일된 .class 파일, 리소스(.png, .properties ...), jar metadata 등으로 구성됨
- JDK에 포함된 프로그램이 ZIP 압축과 동일한 알고리즘을 사용해 압축 (압축 없이 생성도 가능)  
  ➜ 생성된 JAR를 gzip, Pack200 등의 추가 압축 포맷을 적용해 더 작은 크기로 전송할 수 있음 (Pakc200은 Java 런타임 구조 변화 등으로 인해 JDK11부터 deprecated, JDK14에서 완전히 제거됨)  
  ➜ 보통 3~4배, 최대 9배까지 압축 가능

# 사용
- 어플리케이션을 묶어서 배포하거나 설치할 수 있도록 함
- 라이브러리 패키징
- 단순 압축
- (JAR 안에 메인 클래스를 지정하면 java -jar 파일명.jar 로 JAR 파일 자체를 압축 없이 실행할 수 있음)

# 구성 요소
- 컴파일된 .class 파일
- 리소스(.png, .properties ...)
- META-INF: JAR 파일의 특별한 정보
- MANIFEST.MF: JAR 파일의 설명서. JAR 실행 시 어떤 클래스를 먼저 실행할지와 같은 정보 포함

# 실습 - JAR 만들기 (maven 프로젝트 기준)
![image](https://github.com/user-attachments/assets/6dab5350-47e9-4e6b-a8d7-0cae7f45b947)  
기본 프로젝트 생성    

![image](https://github.com/user-attachments/assets/c2b0bc31-6ee9-43f1-a7fe-0a35f78b05c7)  
3 Maven buiild...    

![image](https://github.com/user-attachments/assets/dd86018a-4529-42c6-adce-cf3855a45374)  
Goals에 clean package 입력 후 Run  


![image](https://github.com/user-attachments/assets/e3ef0e61-369a-49cc-aa63-094b2ff9ca20)  
target 폴더 안에 .jar 파일 생성    


![image](https://github.com/user-attachments/assets/30463829-7699-4a1b-84dc-b603e6dd916b)  
ZIP과 압축 알고리즘이 같기 때문에, 반디집으로도 볼 수 있다.    


![image](https://github.com/user-attachments/assets/81e0511c-3359-423b-bb6c-fbe82b78bb1c)  
java파일은 안들어가고 바이트 코드만 볼 수 있다.  
이렇게 컴파일된 .class를 가지고 있는 jar파일은 다른 사람들에게 배포할 수 있는 라이브러리가 된다.


# 실습 - 만든 JAR를 라이브러리로 사용하기
![image](https://github.com/user-attachments/assets/4e86a70e-9ab3-4c8e-a4e9-4723ee41c34b)  
이렇게 수정하고 .jar 새로 만들기


![image](https://github.com/user-attachments/assets/90787f7c-5b2e-489e-9213-0d4bf01de670)  
새 프로젝트 만들고 lib폴더 만들고 생성한 .jar 파일 넣기    


![image](https://github.com/user-attachments/assets/8fcf0789-fc63-4f4a-afb4-b96c0f748b41)  ![image](https://github.com/user-attachments/assets/93cb11bf-705f-48d2-a2fb-c30812508a1b)  
build path에 .jar 파일 추가


![image](https://github.com/user-attachments/assets/bbdb1eae-dbdb-405e-aaba-7da086180640)  
이렇게 활용할 수 있다.  


# 실습 - 요약
- Sample 프로젝트를 .jar 파일로 만들고 NewSample 프로젝트에 넣어서 Sample 프로젝트에 있는 SmapleStart 클래스를 사용할 수 있다.  
(두 클래스 모두 default package이기 때문에 import를 안 해도 됨)


# rt.jar
rt = runtime  
Java9 이전까지 java.lang, java.util, java.io 등 핵심 클래스를 담은 Java SE 제공 필수 라이브러리  
JRE에 포함되어 있었다.  
Java9부터 새로운 구조 도입으로 사라지고 별도의 모듈로 분리됨  
즉, rt.jar는 사라지고 jdk안의 lib/modules 안에 분리되어서 포함됨  
# modules

![image](https://github.com/user-attachments/assets/71fb4d4b-451f-46fc-966a-2a1f179ca04e)
Java 런타임만 이해할 수 있는 특수한 바이너리 구조 (JRT 포맷)  
내부에 .class 파일이 포함됨  
JAR/ZIP보다 더 빠르고 공간 효율적으로 클래스를 저장하고 로드할 수 있음  
오염을 방지하기 위해 임의 변경, 수정이 불가능함  
# ee.jar
과거 EE API(Servlet, JSP, EJB, JPA 등)가 묶여있는 JAR 파일  
Jakarta EE 로 전환되면서, 각 API가 별도의 JAR 파일로 분리됨  
JavaSE 에서 제공하지 않는 엔터프라이즈 기능을 라이브러리로 분리해, 서버 환경에서만 동작하도록 설게됨  

![image](https://github.com/user-attachments/assets/cf75c5d5-6e15-4bec-90bf-4443ca793d8a)  
Jakarta EE의 Servlet API (분리된 ee.jar의 역할 중 일부)  

![image](https://github.com/user-attachments/assets/99cd1fbf-1d77-4cf7-a680-19ddf845d164)  
Jakarta Servlet에서 정의한 표준(이미지에서는 HttpServlet)을 여러 벤더에서 구현한 모습  
즉, Tomcat이 Jakarta가 제공한 Servlet 인터페이스를 구현 및 배포했고, 사용자가 이를 다운받아서 활용하는 구조이다.

